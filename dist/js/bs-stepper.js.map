{"version":3,"file":"bs-stepper.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = (typeof window !== 'undefined') ? window.Element.prototype.matches : undefined\r\nlet closest = (element, selector) => element.closest(selector)\r\nlet WinEvent = (inType, params) => (typeof window !== 'undefined') ? new window.Event(inType, params) : undefined\r\nlet createCustomEvent = (eventName, params) => {\r\n  const cEvent = (typeof window !== 'undefined') ? new window.CustomEvent(eventName, params) : undefined\r\n\r\n  return cEvent\r\n}\r\n\r\n/* istanbul ignore next */\r\nfunction polyfill () {\r\n  if (typeof window !== 'undefined' && !window.Element.prototype.matches) {\r\n    matches = window.Element.prototype.msMatchesSelector ||\r\n      window.Element.prototype.webkitMatchesSelector\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && !window.Element.prototype.closest) {\r\n    closest = (element, selector) => {\r\n      if (!document.documentElement.contains(element)) {\r\n        return null\r\n      }\r\n\r\n      do {\r\n        if (matches.call(element, selector)) {\r\n          return element\r\n        }\r\n\r\n        element = element.parentElement || element.parentNode\r\n      } while (element !== null && element.nodeType === 1)\r\n\r\n      return null\r\n    }\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && (!window.Event || typeof window.Event !== 'function')) {\r\n    WinEvent = (inType, params = {}) => {\r\n      const e = document.createEvent('Event')\r\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\r\n      return e\r\n    }\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && typeof window.CustomEvent !== 'function') {\r\n    const originPreventDefault = window.Event.prototype.preventDefault\r\n\r\n    createCustomEvent = (eventName, params) => {\r\n      const evt = document.createEvent('CustomEvent')\r\n\r\n      params = params || { bubbles: false, cancelable: false, detail: null }\r\n      evt.initCustomEvent(eventName, params.bubbles, params.cancelable, params.detail)\r\n      evt.preventDefault = function () {\r\n        if (!this.cancelable) {\r\n          return\r\n        }\r\n\r\n        originPreventDefault.call(this)\r\n        Object.defineProperty(this, 'defaultPrevented', {\r\n          get: function () { return true }\r\n        })\r\n      }\r\n\r\n      return evt\r\n    }\r\n  }\r\n}\r\n\r\npolyfill()\r\n\r\nexport {\r\n  closest,\r\n  WinEvent,\r\n  createCustomEvent\r\n}\r\n","import { WinEvent, createCustomEvent } from './polyfill'\r\n\r\nconst MILLISECONDS_MULTIPLIER = 1000\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear',\r\n  BLOCK: 'dstepper-block',\r\n  NONE: 'dstepper-none',\r\n  FADE: 'fade',\r\n  VERTICAL: 'vertical'\r\n}\r\n\r\nconst transitionEndEvent = 'transitionend'\r\nconst customProperty = 'bsStepper'\r\n\r\nconst show = (stepperNode, indexStep, options, done) => {\r\n  const stepper = stepperNode[customProperty]\r\n\r\n  if (stepper._steps[indexStep].classList.contains(ClassName.ACTIVE) || stepper._stepsContents[indexStep].classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const showEvent = createCustomEvent('show.bs-stepper', {\r\n    cancelable: true,\r\n    detail: {\r\n      from: stepper._currentIndex,\r\n      to: indexStep,\r\n      indexStep\r\n    }\r\n  })\r\n  stepperNode.dispatchEvent(showEvent)\r\n\r\n  const activeStep = stepper._steps.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  const activeContent = stepper._stepsContents.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n\r\n  if (showEvent.defaultPrevented) {\r\n    return\r\n  }\r\n\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n\r\n    if (!stepperNode.classList.contains(ClassName.VERTICAL) && !stepper.options.animation) {\r\n      activeContent[0].classList.remove(ClassName.BLOCK)\r\n    }\r\n  }\r\n\r\n  showStep(stepperNode, stepper._steps[indexStep], stepper._steps, options)\r\n  showContent(stepperNode, stepper._stepsContents[indexStep], stepper._stepsContents, activeContent, done)\r\n}\r\n\r\nconst showStep = (stepperNode, step, stepList, options) => {\r\n  stepList.forEach(step => {\r\n    const trigger = step.querySelector(options.selectors.trigger)\r\n\r\n    trigger.setAttribute('aria-selected', 'false')\r\n    // if stepper is in linear mode, set disabled attribute on the trigger\r\n    if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n      trigger.setAttribute('disabled', 'disabled')\r\n    }\r\n  })\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n  const currentTrigger = step.querySelector(options.selectors.trigger)\r\n\r\n  currentTrigger.setAttribute('aria-selected', 'true')\r\n  // if stepper is in linear mode, remove disabled attribute on current\r\n  if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n    currentTrigger.removeAttribute('disabled')\r\n  }\r\n}\r\n\r\nconst showContent = (stepperNode, content, contentList, activeContent, done) => {\r\n  const stepper = stepperNode[customProperty]\r\n  const toIndex = contentList.indexOf(content)\r\n  const shownEvent = createCustomEvent('shown.bs-stepper', {\r\n    cancelable: true,\r\n    detail: {\r\n      from: stepper._currentIndex,\r\n      to: toIndex,\r\n      indexStep: toIndex\r\n    }\r\n  })\r\n\r\n  function complete () {\r\n    content.classList.add(ClassName.BLOCK)\r\n    content.removeEventListener(transitionEndEvent, complete)\r\n    stepperNode.dispatchEvent(shownEvent)\r\n    done()\r\n  }\r\n\r\n  if (content.classList.contains(ClassName.FADE)) {\r\n    content.classList.remove(ClassName.NONE)\r\n    const duration = getTransitionDurationFromElement(content)\r\n\r\n    content.addEventListener(transitionEndEvent, complete)\r\n    if (activeContent.length) {\r\n      activeContent[0].classList.add(ClassName.NONE)\r\n    }\r\n\r\n    content.classList.add(ClassName.ACTIVE)\r\n    emulateTransitionEnd(content, duration)\r\n  } else {\r\n    content.classList.add(ClassName.ACTIVE)\r\n    content.classList.add(ClassName.BLOCK)\r\n    stepperNode.dispatchEvent(shownEvent)\r\n    done()\r\n  }\r\n}\r\n\r\nconst getTransitionDurationFromElement = element => {\r\n  if (!element) {\r\n    return 0\r\n  }\r\n\r\n  // Get transition-duration of the element\r\n  let transitionDuration = typeof window !== 'undefined' ? window.getComputedStyle(element).transitionDuration : 0\r\n  const floatTransitionDuration = parseFloat(transitionDuration)\r\n\r\n  // Return 0 if element or transition duration is not found\r\n  if (!floatTransitionDuration) {\r\n    return 0\r\n  }\r\n\r\n  // If multiple durations are defined, take the first\r\n  transitionDuration = transitionDuration.split(',')[0]\r\n\r\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\r\n}\r\n\r\nconst emulateTransitionEnd = (element, duration) => {\r\n  let called = false\r\n  const durationPadding = 5\r\n  const emulatedDuration = duration + durationPadding\r\n  function listener () {\r\n    called = true\r\n    element.removeEventListener(transitionEndEvent, listener)\r\n  }\r\n\r\n  element.addEventListener(transitionEndEvent, listener)\r\n  if (typeof window !== 'undefined') {\r\n    window.setTimeout(() => {\r\n      if (!called) {\r\n        element.dispatchEvent(WinEvent(transitionEndEvent))\r\n      }\r\n\r\n      element.removeEventListener(transitionEndEvent, listener)\r\n    }, emulatedDuration)\r\n  }\r\n}\r\n\r\nconst detectAnimation = (contentList, options) => {\r\n  if (options.animation) {\r\n    contentList.forEach(content => {\r\n      content.classList.add(ClassName.FADE)\r\n      content.classList.add(ClassName.NONE)\r\n    })\r\n  }\r\n}\r\n\r\nexport {\r\n  show,\r\n  ClassName,\r\n  customProperty,\r\n  detectAnimation\r\n}\r\n","import { closest } from './polyfill'\nimport { customProperty, show } from './util'\n\nconst buildClickStepLinearListener = () => function clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nconst buildClickStepNonLinearListener = options => function clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, options.selectors.steps)\n  const stepperNode = closest(step, options.selectors.stepper)\n  const stepper = stepperNode[customProperty]\n  const stepIndex = stepper._steps.indexOf(step)\n\n  show(stepperNode, stepIndex, options, () => {\n    stepper._currentIndex = stepIndex\n  })\n}\n\nexport {\n  buildClickStepLinearListener,\n  buildClickStepNonLinearListener\n}\n","import { show, customProperty, detectAnimation, ClassName } from './util'\nimport { buildClickStepLinearListener, buildClickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true,\n  animation: false,\n  selectors: {\n    steps: '.step',\n    trigger: '.step-trigger',\n    stepper: '.bs-stepper'\n  }\n}\n\nclass Stepper {\n  constructor (element, _options = {}) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    this.options.selectors = {\n      ...DEFAULT_OPTIONS.selectors,\n      ...this.options.selectors\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    this._steps = [].slice.call(this._element.querySelectorAll(this.options.selectors.steps))\n\n    this._steps.filter(step => step.hasAttribute('data-target'))\n      .forEach(step => {\n        this._stepsContents.push(\n          this._element.querySelector(step.getAttribute('data-target'))\n        )\n      })\n\n    detectAnimation(this._stepsContents, this.options)\n    this._setLinkListeners()\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n\n    if (this._steps.length) {\n      show(this._element, this._currentIndex, this.options, () => {})\n    }\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(this.options.selectors.trigger)\n\n      if (this.options.linear) {\n        this._clickStepLinearListener = buildClickStepLinearListener()\n        trigger.addEventListener('click', this._clickStepLinearListener)\n      } else {\n        this._clickStepNonLinearListener = buildClickStepNonLinearListener(this.options)\n        trigger.addEventListener('click', this._clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    const nextStep = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\n\n    show(this._element, nextStep, this.options, () => {\n      this._currentIndex = nextStep\n    })\n  }\n\n  previous () {\n    const previousStep = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\n\n    show(this._element, previousStep, this.options, () => {\n      this._currentIndex = previousStep\n    })\n  }\n\n  to (stepNumber) {\n    const tempIndex = stepNumber - 1\n    const nextStep = tempIndex >= 0 && tempIndex < this._steps.length\n      ? tempIndex\n      : 0\n\n    show(this._element, nextStep, this.options, () => {\n      this._currentIndex = nextStep\n    })\n  }\n\n  reset () {\n    show(this._element, 0, this.options, () => {\n      this._currentIndex = 0\n    })\n  }\n\n  destroy () {\n    this._steps.forEach(step => {\n      const trigger = step.querySelector(this.options.selectors.trigger)\n\n      if (this.options.linear) {\n        trigger.removeEventListener('click', this._clickStepLinearListener)\n      } else {\n        trigger.removeEventListener('click', this._clickStepNonLinearListener)\n      }\n    })\n\n    this._element[customProperty] = undefined\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n    this._clickStepLinearListener = undefined\n    this._clickStepNonLinearListener = undefined\n  }\n}\n\nexport default Stepper\n"],"names":["matches","window","Element","prototype","undefined","closest","element","selector","WinEvent","inType","params","Event","createCustomEvent","eventName","cEvent","CustomEvent","polyfill","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","originPreventDefault","preventDefault","evt","detail","initCustomEvent","Object","defineProperty","get","MILLISECONDS_MULTIPLIER","ClassName","ACTIVE","LINEAR","BLOCK","NONE","FADE","VERTICAL","transitionEndEvent","customProperty","show","stepperNode","indexStep","options","done","stepper","_steps","classList","_stepsContents","showEvent","from","_currentIndex","to","dispatchEvent","activeStep","filter","step","activeContent","content","defaultPrevented","length","remove","animation","showStep","showContent","stepList","forEach","trigger","querySelector","selectors","setAttribute","add","currentTrigger","removeAttribute","contentList","toIndex","indexOf","shownEvent","complete","removeEventListener","duration","getTransitionDurationFromElement","addEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","floatTransitionDuration","parseFloat","split","called","durationPadding","emulatedDuration","listener","setTimeout","detectAnimation","buildClickStepLinearListener","clickStepLinearListener","event","buildClickStepNonLinearListener","clickStepNonLinearListener","target","steps","stepIndex","DEFAULT_OPTIONS","linear","Stepper","_options","_element","slice","querySelectorAll","hasAttribute","push","getAttribute","_setLinkListeners","value","writable","_clickStepLinearListener","_clickStepNonLinearListener","next","nextStep","previous","previousStep","stepNumber","tempIndex","reset","destroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAIA,OAAO,GAAI,OAAOC,MAAP,KAAkB,WAAnB,GAAkCA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBH,OAA3D,GAAqEI,SAAnF;;EACA,IAAIC,OAAO,GAAG,iBAACC,OAAD,EAAUC,QAAV;EAAA,SAAuBD,OAAO,CAACD,OAAR,CAAgBE,QAAhB,CAAvB;EAAA,CAAd;;EACA,IAAIC,QAAQ,GAAG,kBAACC,MAAD,EAASC,MAAT;EAAA,SAAqB,OAAOT,MAAP,KAAkB,WAAnB,GAAkC,IAAIA,MAAM,CAACU,KAAX,CAAiBF,MAAjB,EAAyBC,MAAzB,CAAlC,GAAqEN,SAAzF;EAAA,CAAf;;EACA,IAAIQ,iBAAiB,GAAG,2BAACC,SAAD,EAAYH,MAAZ,EAAuB;EAC7C,MAAMI,MAAM,GAAI,OAAOb,MAAP,KAAkB,WAAnB,GAAkC,IAAIA,MAAM,CAACc,WAAX,CAAuBF,SAAvB,EAAkCH,MAAlC,CAAlC,GAA8EN,SAA7F;EAEA,SAAOU,MAAP;EACD,CAJD;EAMA;;;EACA,SAASE,QAAT,GAAqB;EACnB,MAAI,OAAOf,MAAP,KAAkB,WAAlB,IAAiC,CAACA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBH,OAA/D,EAAwE;EACtEA,IAAAA,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBc,iBAAzB,IACRhB,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBe,qBAD3B;EAED;;EAED,MAAI,OAAOjB,MAAP,KAAkB,WAAlB,IAAiC,CAACA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBE,OAA/D,EAAwE;EACtEA,IAAAA,OAAO,GAAG,iBAACC,OAAD,EAAUC,QAAV,EAAuB;EAC/B,UAAI,CAACY,QAAQ,CAACC,eAAT,CAAyBC,QAAzB,CAAkCf,OAAlC,CAAL,EAAiD;EAC/C,eAAO,IAAP;EACD;;EAED,SAAG;EACD,YAAIN,OAAO,CAACsB,IAAR,CAAahB,OAAb,EAAsBC,QAAtB,CAAJ,EAAqC;EACnC,iBAAOD,OAAP;EACD;;EAEDA,QAAAA,OAAO,GAAGA,OAAO,CAACiB,aAAR,IAAyBjB,OAAO,CAACkB,UAA3C;EACD,OAND,QAMSlB,OAAO,KAAK,IAAZ,IAAoBA,OAAO,CAACmB,QAAR,KAAqB,CANlD;;EAQA,aAAO,IAAP;EACD,KAdD;EAeD;;EAED,MAAI,OAAOxB,MAAP,KAAkB,WAAlB,KAAkC,CAACA,MAAM,CAACU,KAAR,IAAiB,OAAOV,MAAM,CAACU,KAAd,KAAwB,UAA3E,CAAJ,EAA4F;EAC1FH,IAAAA,QAAQ,GAAG,kBAACC,MAAD,EAASC,MAAT,EAAyB;EAAA,UAAhBA,MAAgB;EAAhBA,QAAAA,MAAgB,GAAP,EAAO;EAAA;;EAClC,UAAMgB,CAAC,GAAGP,QAAQ,CAACQ,WAAT,CAAqB,OAArB,CAAV;EACAD,MAAAA,CAAC,CAACE,SAAF,CAAYnB,MAAZ,EAAoBoB,OAAO,CAACnB,MAAM,CAACoB,OAAR,CAA3B,EAA6CD,OAAO,CAACnB,MAAM,CAACqB,UAAR,CAApD;EACA,aAAOL,CAAP;EACD,KAJD;EAKD;;EAED,MAAI,OAAOzB,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAACc,WAAd,KAA8B,UAAnE,EAA+E;EAC7E,QAAMiB,oBAAoB,GAAG/B,MAAM,CAACU,KAAP,CAAaR,SAAb,CAAuB8B,cAApD;;EAEArB,IAAAA,iBAAiB,GAAG,2BAACC,SAAD,EAAYH,MAAZ,EAAuB;EACzC,UAAMwB,GAAG,GAAGf,QAAQ,CAACQ,WAAT,CAAqB,aAArB,CAAZ;EAEAjB,MAAAA,MAAM,GAAGA,MAAM,IAAI;EAAEoB,QAAAA,OAAO,EAAE,KAAX;EAAkBC,QAAAA,UAAU,EAAE,KAA9B;EAAqCI,QAAAA,MAAM,EAAE;EAA7C,OAAnB;EACAD,MAAAA,GAAG,CAACE,eAAJ,CAAoBvB,SAApB,EAA+BH,MAAM,CAACoB,OAAtC,EAA+CpB,MAAM,CAACqB,UAAtD,EAAkErB,MAAM,CAACyB,MAAzE;;EACAD,MAAAA,GAAG,CAACD,cAAJ,GAAqB,YAAY;EAC/B,YAAI,CAAC,KAAKF,UAAV,EAAsB;EACpB;EACD;;EAEDC,QAAAA,oBAAoB,CAACV,IAArB,CAA0B,IAA1B;EACAe,QAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,kBAA5B,EAAgD;EAC9CC,UAAAA,GAAG,EAAE,eAAY;EAAE,mBAAO,IAAP;EAAa;EADc,SAAhD;EAGD,OATD;;EAWA,aAAOL,GAAP;EACD,KAjBD;EAkBD;EACF;;EAEDlB,QAAQ;;EChER,IAAMwB,uBAAuB,GAAG,IAAhC;EAEA,IAAMC,SAAS,GAAG;EAChBC,EAAAA,MAAM,EAAE,QADQ;EAEhBC,EAAAA,MAAM,EAAE,QAFQ;EAGhBC,EAAAA,KAAK,EAAE,gBAHS;EAIhBC,EAAAA,IAAI,EAAE,eAJU;EAKhBC,EAAAA,IAAI,EAAE,MALU;EAMhBC,EAAAA,QAAQ,EAAE;EANM,CAAlB;EASA,IAAMC,kBAAkB,GAAG,eAA3B;EACA,IAAMC,cAAc,GAAG,WAAvB;;EAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,WAAD,EAAcC,SAAd,EAAyBC,OAAzB,EAAkCC,IAAlC,EAA2C;EACtD,MAAMC,OAAO,GAAGJ,WAAW,CAACF,cAAD,CAA3B;;EAEA,MAAIM,OAAO,CAACC,MAAR,CAAeJ,SAAf,EAA0BK,SAA1B,CAAoCpC,QAApC,CAA6CoB,SAAS,CAACC,MAAvD,KAAkEa,OAAO,CAACG,cAAR,CAAuBN,SAAvB,EAAkCK,SAAlC,CAA4CpC,QAA5C,CAAqDoB,SAAS,CAACC,MAA/D,CAAtE,EAA8I;EAC5I;EACD;;EAED,MAAMiB,SAAS,GAAG/C,iBAAiB,CAAC,iBAAD,EAAoB;EACrDmB,IAAAA,UAAU,EAAE,IADyC;EAErDI,IAAAA,MAAM,EAAE;EACNyB,MAAAA,IAAI,EAAEL,OAAO,CAACM,aADR;EAENC,MAAAA,EAAE,EAAEV,SAFE;EAGNA,MAAAA,SAAS,EAATA;EAHM;EAF6C,GAApB,CAAnC;EAQAD,EAAAA,WAAW,CAACY,aAAZ,CAA0BJ,SAA1B;;EAEA,MAAMK,UAAU,GAAGT,OAAO,CAACC,MAAR,CAAeS,MAAf,CAAsB,UAAAC,IAAI;EAAA,WAAIA,IAAI,CAACT,SAAL,CAAepC,QAAf,CAAwBoB,SAAS,CAACC,MAAlC,CAAJ;EAAA,GAA1B,CAAnB;;EACA,MAAMyB,aAAa,GAAGZ,OAAO,CAACG,cAAR,CAAuBO,MAAvB,CAA8B,UAAAG,OAAO;EAAA,WAAIA,OAAO,CAACX,SAAR,CAAkBpC,QAAlB,CAA2BoB,SAAS,CAACC,MAArC,CAAJ;EAAA,GAArC,CAAtB;;EAEA,MAAIiB,SAAS,CAACU,gBAAd,EAAgC;EAC9B;EACD;;EAED,MAAIL,UAAU,CAACM,MAAf,EAAuB;EACrBN,IAAAA,UAAU,CAAC,CAAD,CAAV,CAAcP,SAAd,CAAwBc,MAAxB,CAA+B9B,SAAS,CAACC,MAAzC;EACD;;EACD,MAAIyB,aAAa,CAACG,MAAlB,EAA0B;EACxBH,IAAAA,aAAa,CAAC,CAAD,CAAb,CAAiBV,SAAjB,CAA2Bc,MAA3B,CAAkC9B,SAAS,CAACC,MAA5C;;EAEA,QAAI,CAACS,WAAW,CAACM,SAAZ,CAAsBpC,QAAtB,CAA+BoB,SAAS,CAACM,QAAzC,CAAD,IAAuD,CAACQ,OAAO,CAACF,OAAR,CAAgBmB,SAA5E,EAAuF;EACrFL,MAAAA,aAAa,CAAC,CAAD,CAAb,CAAiBV,SAAjB,CAA2Bc,MAA3B,CAAkC9B,SAAS,CAACG,KAA5C;EACD;EACF;;EAED6B,EAAAA,QAAQ,CAACtB,WAAD,EAAcI,OAAO,CAACC,MAAR,CAAeJ,SAAf,CAAd,EAAyCG,OAAO,CAACC,MAAjD,EAAyDH,OAAzD,CAAR;EACAqB,EAAAA,WAAW,CAACvB,WAAD,EAAcI,OAAO,CAACG,cAAR,CAAuBN,SAAvB,CAAd,EAAiDG,OAAO,CAACG,cAAzD,EAAyES,aAAzE,EAAwFb,IAAxF,CAAX;EACD,CArCD;;EAuCA,IAAMmB,QAAQ,GAAG,SAAXA,QAAW,CAACtB,WAAD,EAAce,IAAd,EAAoBS,QAApB,EAA8BtB,OAA9B,EAA0C;EACzDsB,EAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAV,IAAI,EAAI;EACvB,QAAMW,OAAO,GAAGX,IAAI,CAACY,aAAL,CAAmBzB,OAAO,CAAC0B,SAAR,CAAkBF,OAArC,CAAhB;EAEAA,IAAAA,OAAO,CAACG,YAAR,CAAqB,eAArB,EAAsC,OAAtC,EAHuB;;EAKvB,QAAI7B,WAAW,CAACM,SAAZ,CAAsBpC,QAAtB,CAA+BoB,SAAS,CAACE,MAAzC,CAAJ,EAAsD;EACpDkC,MAAAA,OAAO,CAACG,YAAR,CAAqB,UAArB,EAAiC,UAAjC;EACD;EACF,GARD;EAUAd,EAAAA,IAAI,CAACT,SAAL,CAAewB,GAAf,CAAmBxC,SAAS,CAACC,MAA7B;EACA,MAAMwC,cAAc,GAAGhB,IAAI,CAACY,aAAL,CAAmBzB,OAAO,CAAC0B,SAAR,CAAkBF,OAArC,CAAvB;EAEAK,EAAAA,cAAc,CAACF,YAAf,CAA4B,eAA5B,EAA6C,MAA7C,EAdyD;;EAgBzD,MAAI7B,WAAW,CAACM,SAAZ,CAAsBpC,QAAtB,CAA+BoB,SAAS,CAACE,MAAzC,CAAJ,EAAsD;EACpDuC,IAAAA,cAAc,CAACC,eAAf,CAA+B,UAA/B;EACD;EACF,CAnBD;;EAqBA,IAAMT,WAAW,GAAG,SAAdA,WAAc,CAACvB,WAAD,EAAciB,OAAd,EAAuBgB,WAAvB,EAAoCjB,aAApC,EAAmDb,IAAnD,EAA4D;EAC9E,MAAMC,OAAO,GAAGJ,WAAW,CAACF,cAAD,CAA3B;EACA,MAAMoC,OAAO,GAAGD,WAAW,CAACE,OAAZ,CAAoBlB,OAApB,CAAhB;EACA,MAAMmB,UAAU,GAAG3E,iBAAiB,CAAC,kBAAD,EAAqB;EACvDmB,IAAAA,UAAU,EAAE,IAD2C;EAEvDI,IAAAA,MAAM,EAAE;EACNyB,MAAAA,IAAI,EAAEL,OAAO,CAACM,aADR;EAENC,MAAAA,EAAE,EAAEuB,OAFE;EAGNjC,MAAAA,SAAS,EAAEiC;EAHL;EAF+C,GAArB,CAApC;;EASA,WAASG,QAAT,GAAqB;EACnBpB,IAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACG,KAAhC;EACAwB,IAAAA,OAAO,CAACqB,mBAAR,CAA4BzC,kBAA5B,EAAgDwC,QAAhD;EACArC,IAAAA,WAAW,CAACY,aAAZ,CAA0BwB,UAA1B;EACAjC,IAAAA,IAAI;EACL;;EAED,MAAIc,OAAO,CAACX,SAAR,CAAkBpC,QAAlB,CAA2BoB,SAAS,CAACK,IAArC,CAAJ,EAAgD;EAC9CsB,IAAAA,OAAO,CAACX,SAAR,CAAkBc,MAAlB,CAAyB9B,SAAS,CAACI,IAAnC;EACA,QAAM6C,QAAQ,GAAGC,gCAAgC,CAACvB,OAAD,CAAjD;EAEAA,IAAAA,OAAO,CAACwB,gBAAR,CAAyB5C,kBAAzB,EAA6CwC,QAA7C;;EACA,QAAIrB,aAAa,CAACG,MAAlB,EAA0B;EACxBH,MAAAA,aAAa,CAAC,CAAD,CAAb,CAAiBV,SAAjB,CAA2BwB,GAA3B,CAA+BxC,SAAS,CAACI,IAAzC;EACD;;EAEDuB,IAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACC,MAAhC;EACAmD,IAAAA,oBAAoB,CAACzB,OAAD,EAAUsB,QAAV,CAApB;EACD,GAXD,MAWO;EACLtB,IAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACC,MAAhC;EACA0B,IAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACG,KAAhC;EACAO,IAAAA,WAAW,CAACY,aAAZ,CAA0BwB,UAA1B;EACAjC,IAAAA,IAAI;EACL;EACF,CApCD;;EAsCA,IAAMqC,gCAAgC,GAAG,SAAnCA,gCAAmC,CAAArF,OAAO,EAAI;EAClD,MAAI,CAACA,OAAL,EAAc;EACZ,WAAO,CAAP;EACD,GAHiD;;;EAMlD,MAAIwF,kBAAkB,GAAG,OAAO7F,MAAP,KAAkB,WAAlB,GAAgCA,MAAM,CAAC8F,gBAAP,CAAwBzF,OAAxB,EAAiCwF,kBAAjE,GAAsF,CAA/G;EACA,MAAME,uBAAuB,GAAGC,UAAU,CAACH,kBAAD,CAA1C,CAPkD;;EAUlD,MAAI,CAACE,uBAAL,EAA8B;EAC5B,WAAO,CAAP;EACD,GAZiD;;;EAelDF,EAAAA,kBAAkB,GAAGA,kBAAkB,CAACI,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAArB;EAEA,SAAOD,UAAU,CAACH,kBAAD,CAAV,GAAiCtD,uBAAxC;EACD,CAlBD;;EAoBA,IAAMqD,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACvF,OAAD,EAAUoF,QAAV,EAAuB;EAClD,MAAIS,MAAM,GAAG,KAAb;EACA,MAAMC,eAAe,GAAG,CAAxB;EACA,MAAMC,gBAAgB,GAAGX,QAAQ,GAAGU,eAApC;;EACA,WAASE,QAAT,GAAqB;EACnBH,IAAAA,MAAM,GAAG,IAAT;EACA7F,IAAAA,OAAO,CAACmF,mBAAR,CAA4BzC,kBAA5B,EAAgDsD,QAAhD;EACD;;EAEDhG,EAAAA,OAAO,CAACsF,gBAAR,CAAyB5C,kBAAzB,EAA6CsD,QAA7C;;EACA,MAAI,OAAOrG,MAAP,KAAkB,WAAtB,EAAmC;EACjCA,IAAAA,MAAM,CAACsG,UAAP,CAAkB,YAAM;EACtB,UAAI,CAACJ,MAAL,EAAa;EACX7F,QAAAA,OAAO,CAACyD,aAAR,CAAsBvD,QAAQ,CAACwC,kBAAD,CAA9B;EACD;;EAED1C,MAAAA,OAAO,CAACmF,mBAAR,CAA4BzC,kBAA5B,EAAgDsD,QAAhD;EACD,KAND,EAMGD,gBANH;EAOD;EACF,CAnBD;;EAqBA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAACpB,WAAD,EAAc/B,OAAd,EAA0B;EAChD,MAAIA,OAAO,CAACmB,SAAZ,EAAuB;EACrBY,IAAAA,WAAW,CAACR,OAAZ,CAAoB,UAAAR,OAAO,EAAI;EAC7BA,MAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACK,IAAhC;EACAsB,MAAAA,OAAO,CAACX,SAAR,CAAkBwB,GAAlB,CAAsBxC,SAAS,CAACI,IAAhC;EACD,KAHD;EAID;EACF,CAPD;;ECxJA,IAAM4D,4BAA4B,GAAG,SAA/BA,4BAA+B;EAAA,SAAM,SAASC,uBAAT,CAAkCC,KAAlC,EAAyC;EAClFA,IAAAA,KAAK,CAAC1E,cAAN;EACD,GAFoC;EAAA,CAArC;;EAIA,IAAM2E,+BAA+B,GAAG,SAAlCA,+BAAkC,CAAAvD,OAAO;EAAA,SAAI,SAASwD,0BAAT,CAAqCF,KAArC,EAA4C;EAC7FA,IAAAA,KAAK,CAAC1E,cAAN;EAEA,QAAMiC,IAAI,GAAG7D,OAAO,CAACsG,KAAK,CAACG,MAAP,EAAezD,OAAO,CAAC0B,SAAR,CAAkBgC,KAAjC,CAApB;EACA,QAAM5D,WAAW,GAAG9C,OAAO,CAAC6D,IAAD,EAAOb,OAAO,CAAC0B,SAAR,CAAkBxB,OAAzB,CAA3B;EACA,QAAMA,OAAO,GAAGJ,WAAW,CAACF,cAAD,CAA3B;;EACA,QAAM+D,SAAS,GAAGzD,OAAO,CAACC,MAAR,CAAe8B,OAAf,CAAuBpB,IAAvB,CAAlB;;EAEAhB,IAAAA,IAAI,CAACC,WAAD,EAAc6D,SAAd,EAAyB3D,OAAzB,EAAkC,YAAM;EAC1CE,MAAAA,OAAO,CAACM,aAAR,GAAwBmD,SAAxB;EACD,KAFG,CAAJ;EAGD,GAX8C;EAAA,CAA/C;;ECJA,IAAMC,eAAe,GAAG;EACtBC,EAAAA,MAAM,EAAE,IADc;EAEtB1C,EAAAA,SAAS,EAAE,KAFW;EAGtBO,EAAAA,SAAS,EAAE;EACTgC,IAAAA,KAAK,EAAE,OADE;EAETlC,IAAAA,OAAO,EAAE,eAFA;EAGTtB,IAAAA,OAAO,EAAE;EAHA;EAHW,CAAxB;;MAUM4D;EACJ,mBAAa7G,OAAb,EAAsB8G,QAAtB,EAAqC;EAAA;;EAAA,QAAfA,QAAe;EAAfA,MAAAA,QAAe,GAAJ,EAAI;EAAA;;EACnC,SAAKC,QAAL,GAAgB/G,OAAhB;EACA,SAAKuD,aAAL,GAAqB,CAArB;EACA,SAAKH,cAAL,GAAsB,EAAtB;EAEA,SAAKL,OAAL,gBACK4D,eADL,EAEKG,QAFL;EAKA,SAAK/D,OAAL,CAAa0B,SAAb,gBACKkC,eAAe,CAAClC,SADrB,EAEK,KAAK1B,OAAL,CAAa0B,SAFlB;;EAKA,QAAI,KAAK1B,OAAL,CAAa6D,MAAjB,EAAyB;EACvB,WAAKG,QAAL,CAAc5D,SAAd,CAAwBwB,GAAxB,CAA4BxC,SAAS,CAACE,MAAtC;EACD;;EAED,SAAKa,MAAL,GAAc,GAAG8D,KAAH,CAAShG,IAAT,CAAc,KAAK+F,QAAL,CAAcE,gBAAd,CAA+B,KAAKlE,OAAL,CAAa0B,SAAb,CAAuBgC,KAAtD,CAAd,CAAd;;EAEA,SAAKvD,MAAL,CAAYS,MAAZ,CAAmB,UAAAC,IAAI;EAAA,aAAIA,IAAI,CAACsD,YAAL,CAAkB,aAAlB,CAAJ;EAAA,KAAvB,EACG5C,OADH,CACW,UAAAV,IAAI,EAAI;EACf,MAAA,KAAI,CAACR,cAAL,CAAoB+D,IAApB,CACE,KAAI,CAACJ,QAAL,CAAcvC,aAAd,CAA4BZ,IAAI,CAACwD,YAAL,CAAkB,aAAlB,CAA5B,CADF;EAGD,KALH;;EAOAlB,IAAAA,eAAe,CAAC,KAAK9C,cAAN,EAAsB,KAAKL,OAA3B,CAAf;;EACA,SAAKsE,iBAAL;;EACAtF,IAAAA,MAAM,CAACC,cAAP,CAAsB,KAAK+E,QAA3B,EAAqCpE,cAArC,EAAqD;EACnD2E,MAAAA,KAAK,EAAE,IAD4C;EAEnDC,MAAAA,QAAQ,EAAE;EAFyC,KAArD;;EAKA,QAAI,KAAKrE,MAAL,CAAYc,MAAhB,EAAwB;EACtBpB,MAAAA,IAAI,CAAC,KAAKmE,QAAN,EAAgB,KAAKxD,aAArB,EAAoC,KAAKR,OAAzC,EAAkD,YAAM,EAAxD,CAAJ;EACD;EACF;;;;;WAIDsE,oBAAA,6BAAqB;EAAA;;EACnB,SAAKnE,MAAL,CAAYoB,OAAZ,CAAoB,UAAAV,IAAI,EAAI;EAC1B,UAAMW,OAAO,GAAGX,IAAI,CAACY,aAAL,CAAmB,MAAI,CAACzB,OAAL,CAAa0B,SAAb,CAAuBF,OAA1C,CAAhB;;EAEA,UAAI,MAAI,CAACxB,OAAL,CAAa6D,MAAjB,EAAyB;EACvB,QAAA,MAAI,CAACY,wBAAL,GAAgCrB,4BAA4B,EAA5D;EACA5B,QAAAA,OAAO,CAACe,gBAAR,CAAyB,OAAzB,EAAkC,MAAI,CAACkC,wBAAvC;EACD,OAHD,MAGO;EACL,QAAA,MAAI,CAACC,2BAAL,GAAmCnB,+BAA+B,CAAC,MAAI,CAACvD,OAAN,CAAlE;EACAwB,QAAAA,OAAO,CAACe,gBAAR,CAAyB,OAAzB,EAAkC,MAAI,CAACmC,2BAAvC;EACD;EACF,KAVD;EAWD;;;WAIDC,OAAA,gBAAQ;EAAA;;EACN,QAAMC,QAAQ,GAAI,KAAKpE,aAAL,GAAqB,CAAtB,IAA4B,KAAKL,MAAL,CAAYc,MAAZ,GAAqB,CAAjD,GAAqD,KAAKT,aAAL,GAAqB,CAA1E,GAA+E,KAAKL,MAAL,CAAYc,MAAZ,GAAqB,CAArH;EAEApB,IAAAA,IAAI,CAAC,KAAKmE,QAAN,EAAgBY,QAAhB,EAA0B,KAAK5E,OAA/B,EAAwC,YAAM;EAChD,MAAA,MAAI,CAACQ,aAAL,GAAqBoE,QAArB;EACD,KAFG,CAAJ;EAGD;;WAEDC,WAAA,oBAAY;EAAA;;EACV,QAAMC,YAAY,GAAI,KAAKtE,aAAL,GAAqB,CAAtB,IAA4B,CAA5B,GAAgC,KAAKA,aAAL,GAAqB,CAArD,GAAyD,CAA9E;EAEAX,IAAAA,IAAI,CAAC,KAAKmE,QAAN,EAAgBc,YAAhB,EAA8B,KAAK9E,OAAnC,EAA4C,YAAM;EACpD,MAAA,MAAI,CAACQ,aAAL,GAAqBsE,YAArB;EACD,KAFG,CAAJ;EAGD;;WAEDrE,KAAA,YAAIsE,UAAJ,EAAgB;EAAA;;EACd,QAAMC,SAAS,GAAGD,UAAU,GAAG,CAA/B;EACA,QAAMH,QAAQ,GAAGI,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAG,KAAK7E,MAAL,CAAYc,MAA1C,GACb+D,SADa,GAEb,CAFJ;EAIAnF,IAAAA,IAAI,CAAC,KAAKmE,QAAN,EAAgBY,QAAhB,EAA0B,KAAK5E,OAA/B,EAAwC,YAAM;EAChD,MAAA,MAAI,CAACQ,aAAL,GAAqBoE,QAArB;EACD,KAFG,CAAJ;EAGD;;WAEDK,QAAA,iBAAS;EAAA;;EACPpF,IAAAA,IAAI,CAAC,KAAKmE,QAAN,EAAgB,CAAhB,EAAmB,KAAKhE,OAAxB,EAAiC,YAAM;EACzC,MAAA,MAAI,CAACQ,aAAL,GAAqB,CAArB;EACD,KAFG,CAAJ;EAGD;;WAED0E,UAAA,mBAAW;EAAA;;EACT,SAAK/E,MAAL,CAAYoB,OAAZ,CAAoB,UAAAV,IAAI,EAAI;EAC1B,UAAMW,OAAO,GAAGX,IAAI,CAACY,aAAL,CAAmB,MAAI,CAACzB,OAAL,CAAa0B,SAAb,CAAuBF,OAA1C,CAAhB;;EAEA,UAAI,MAAI,CAACxB,OAAL,CAAa6D,MAAjB,EAAyB;EACvBrC,QAAAA,OAAO,CAACY,mBAAR,CAA4B,OAA5B,EAAqC,MAAI,CAACqC,wBAA1C;EACD,OAFD,MAEO;EACLjD,QAAAA,OAAO,CAACY,mBAAR,CAA4B,OAA5B,EAAqC,MAAI,CAACsC,2BAA1C;EACD;EACF,KARD;;EAUA,SAAKV,QAAL,CAAcpE,cAAd,IAAgC7C,SAAhC;EACA,SAAKiH,QAAL,GAAgBjH,SAAhB;EACA,SAAKyD,aAAL,GAAqBzD,SAArB;EACA,SAAKoD,MAAL,GAAcpD,SAAd;EACA,SAAKsD,cAAL,GAAsBtD,SAAtB;EACA,SAAK0H,wBAAL,GAAgC1H,SAAhC;EACA,SAAK2H,2BAAL,GAAmC3H,SAAnC;EACD;;;;;;;;;;;"}